(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{MCBb:function(e,t,i){"use strict";i.r(t),i.d(t,"PermitVerificationModule",function(){return z});var a=i("ofXK"),r=i("tyNb"),c=i("mrSG"),o=i("fXoL"),b=i("4TgG"),l=i("iZqL"),s=i("5eHb"),n=i("3Pt+"),d=i("kmnG"),m=i("d3UM"),h=i("QibW"),u=i("FKr1"),p=i("0hV+"),g=i("m1XX");function V(e,t){if(1&e&&(o.Vb(0,"tr"),o.Vb(1,"th",23),o.Ec(2),o.Ub(),o.Vb(3,"td"),o.Ec(4),o.Ub(),o.Vb(5,"td"),o.Ec(6),o.Ub(),o.Vb(7,"td"),o.Ec(8),o.Ub(),o.Vb(9,"td"),o.Ec(10),o.Ub(),o.Vb(11,"td"),o.Ec(12),o.Ub(),o.Ub()),2&e){const e=t.$implicit,i=t.index;o.Db(2),o.Fc(i+1),o.Db(2),o.Gc(" ",e.Technical_Name," "),o.Db(2),o.Ic(" ",e.packageSize," ",e.unit," * ",e.packageQuantity," "),o.Db(2),o.Gc(" ",e.totalPrice," "),o.Db(2),o.Gc(" ",e.totalPrice-e.eligibleSubsidy," "),o.Db(2),o.Gc(" ",e.eligibleSubsidy," ")}}let v=(()=>{class e{constructor(){this.getDate=()=>{var e=new Date(this.dealerSaleDetails.dealerResult[0].SoldOn);this.date=JSON.stringify(e),this.date=this.date.slice(1,11)}}ngOnInit(){this.qrData=`FarmerID:${this.dealerSaleDetails.dealerResult[0].FarmerId} , PermitNo:${this.dealerSaleDetails.dealerResult[0].Permit_NO}`,this.getDate()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Jb({type:e,selectors:[["app-dealer-sale-receipt"]],inputs:{dealerSaleDetails:"dealerSaleDetails"},decls:90,vars:11,consts:[[1,"card-header"],[1,"card-header-right"],[1,"icofont","icofont-rounded-down"],[1,"icofont","icofont-refresh"],[1,"icofont","icofont-close-circled"],["id","print-section",1,"card-block"],[1,"row"],[1,"col-md-12"],[2,"text-align","center"],[2,"margin-top","-124px"],[2,"text-align","right",3,"width","qrdata","errorCorrectionLevel"],[1,"col-sm-6","col-lg-6"],[1,"col-sm-2","col-lg-2"],[1,"col-sm-4","col-lg-4"],[1,"table-responsive"],[1,"table","table-bordered"],[4,"ngFor","ngForOf"],[2,"color","red","text-align","center"],[1,"col-sm-3","col-lg-3"],[1,"card-block"],[1,"col-md-7"],[1,"vertical-center"],["type","button","id","primary-popover-content","data-container","body","data-toggle","popover","title","Primary color states","data-placement","bottom","styleSheetFile","node_modules/bootstrap/dist/css/bootstrap.min.css","printSectionId","print-section","ngxPrint","",1,"btn","btn-primary","mat-elevation-z8","float-right",2,"float","right","margin-right","30px"],["scope","row"]],template:function(e,t){1&e&&(o.Vb(0,"div"),o.Vb(1,"div",0),o.Vb(2,"h5"),o.Ec(3,"Print Of Sale Receipt"),o.Ub(),o.Vb(4,"div",1),o.Qb(5,"i",2),o.Qb(6,"i",3),o.Qb(7,"i",4),o.Ub(),o.Ub(),o.Vb(8,"div",5),o.Vb(9,"div",6),o.Vb(10,"div",7),o.Vb(11,"h4",8),o.Ec(12," \u0b15\u0b43\u0b37\u0b3f \u0b13 \u0b15\u0b43\u0b37\u0b15 \u0b38\u0b36\u0b15\u0b4d\u0b24\u0b3f\u0b15\u0b30\u0b23 \u0b2c\u0b3f\u0b2d\u0b3e\u0b17 "),o.Qb(13,"br"),o.Ec(14,"DEPARTMENT OF AGRICULTURE AND FARMER'S EMPOWERMENT "),o.Ub(),o.Vb(15,"h4",8),o.Vb(16,"u"),o.Ec(17,"Dealer Sale Receipt"),o.Ub(),o.Ub(),o.Vb(18,"div",9),o.Qb(19,"qrcode",10),o.Ub(),o.Ub(),o.Ub(),o.Vb(20,"div",6),o.Vb(21,"div",11),o.Vb(22,"label"),o.Ec(23),o.Ub(),o.Ub(),o.Qb(24,"div",12),o.Vb(25,"div",13),o.Vb(26,"label"),o.Ec(27),o.Ub(),o.Qb(28,"br"),o.Vb(29,"label"),o.Ec(30),o.Ub(),o.Ub(),o.Ub(),o.Qb(31,"br"),o.Vb(32,"div",6),o.Vb(33,"div",14),o.Vb(34,"table",15),o.Vb(35,"thead"),o.Vb(36,"tr"),o.Vb(37,"th"),o.Ec(38,"#"),o.Ub(),o.Vb(39,"th"),o.Ec(40,"Technical Name"),o.Ub(),o.Vb(41,"th"),o.Ec(42,"Qauntity"),o.Ub(),o.Vb(43,"th"),o.Ec(44,"Total Price(In Rs)"),o.Ub(),o.Vb(45,"th"),o.Ec(46,"Farmer's Share(In Rs)"),o.Ub(),o.Vb(47,"th"),o.Ec(48,"Eligible Amount(In Rs)"),o.Ub(),o.Ub(),o.Ub(),o.Vb(49,"tbody"),o.Dc(50,V,13,8,"tr",16),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Vb(51,"div",6),o.Vb(52,"div",7),o.Vb(53,"h4",17),o.Vb(54,"u"),o.Ec(55,"Conditions"),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Vb(56,"div",6),o.Vb(57,"div",7),o.Vb(58,"p"),o.Ec(59," 1. One copy of the receipt to be given to the farmer."),o.Qb(60,"br"),o.Ec(61,"2. Second copy of the receipt to be kept with the dealer. "),o.Ub(),o.Ub(),o.Ub(),o.Qb(62,"br"),o.Qb(63,"br"),o.Vb(64,"div",6),o.Vb(65,"div",11),o.Vb(66,"h4"),o.Vb(67,"u"),o.Ec(68,"Signature of Registered Dealer"),o.Ub(),o.Qb(69,"br"),o.Ec(70),o.Qb(71,"br"),o.Ub(),o.Ub(),o.Qb(72,"div",18),o.Vb(73,"div",18),o.Vb(74,"h4"),o.Vb(75,"u"),o.Ec(76,"Signature of Benificiary(Farmer)"),o.Ub(),o.Qb(77,"br"),o.Ec(78),o.Qb(79,"br"),o.Ec(80),o.Qb(81,"br"),o.Ec(82),o.Ub(),o.Ub(),o.Ub(),o.Qb(83,"br"),o.Ub(),o.Vb(84,"div",19),o.Vb(85,"div",6),o.Vb(86,"div",20),o.Vb(87,"div",21),o.Vb(88,"button",22),o.Ec(89," Print "),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Ub()),2&e&&(o.Db(19),o.mc("width",200)("qrdata",t.qrData)("errorCorrectionLevel","M"),o.Db(4),o.Gc("Dealer Licence No : ",t.dealerSaleDetails.dealerResult[0].dealerLiscenseNo," "),o.Db(4),o.Gc("Sale Date : ",t.date,""),o.Db(3),o.Gc("Invoice No : ",t.dealerSaleDetails.dealerResult[0].InvoiceNo," "),o.Db(20),o.mc("ngForOf",t.dealerSaleDetails.dealerResult),o.Db(20),o.Gc("Name: ",t.dealerSaleDetails.dealerResult[0].SoldBy,""),o.Db(8),o.Gc(" Name: ",t.dealerSaleDetails.dealerResult[0].FarmerName," "),o.Db(2),o.Gc(" FarmerId: ",t.dealerSaleDetails.dealerResult[0].FarmerId," "),o.Db(2),o.Gc(" Permit No: ",t.dealerSaleDetails.dealerResult[0].Permit_NO," "))},directives:[p.a,a.k,g.a],styles:[""]}),e})();var f=i("cZdB");function U(e,t){if(1&e&&(o.Vb(0,"option",47),o.Ec(1),o.Ub()),2&e){const e=t.$implicit;o.mc("ngValue",e),o.Db(1),o.Gc(" ",e.ItemName," ")}}function D(e,t){1&e&&(o.Vb(0,"div",48),o.Ec(1," Item Name is required. "),o.Ub())}function S(e,t){if(1&e&&(o.Vb(0,"mat-option",49),o.Ec(1),o.Ub()),2&e){const e=t.$implicit;o.mc("value",e)("disabled",!!e.isPurchased||null),o.Db(1),o.Gc(" ",e.Technical_Name," ")}}function y(e,t){1&e&&(o.Vb(0,"div",48),o.Ec(1," Technical Name is required. "),o.Ub())}function E(e,t){1&e&&(o.Vb(0,"div",48),o.Ec(1," Package Size is required. "),o.Ub())}function P(e,t){1&e&&(o.Vb(0,"div",48),o.Ec(1," Package Size is required. "),o.Ub())}function I(e,t){if(1&e){const e=o.Wb();o.Vb(0,"button",50),o.cc("click",function(){return o.wc(e),o.gc(2).AddTechnicalDetails()}),o.Qb(1,"i",51),o.Ec(2,"ADD"),o.Ub()}if(2&e){const e=o.gc(2);o.mc("disabled",!e.DealerSaleForm.valid)}}function k(e,t){if(1&e){const e=o.Wb();o.Vb(0,"button",50),o.cc("click",function(){return o.wc(e),o.gc(2).AddTechnicalDetails()}),o.Qb(1,"i",51),o.Ec(2,"Add More..."),o.Ub()}if(2&e){const e=o.gc(2);o.mc("disabled",!e.DealerSaleForm.valid)}}function F(e,t){if(1&e){const e=o.Wb();o.Vb(0,"tr"),o.Vb(1,"td"),o.Ec(2),o.Ub(),o.Vb(3,"td"),o.Ec(4),o.Ub(),o.Vb(5,"td"),o.Ec(6),o.Ub(),o.Vb(7,"td"),o.Ec(8),o.Ub(),o.Vb(9,"td"),o.Ec(10),o.Ub(),o.Vb(11,"td"),o.Ec(12),o.Ub(),o.Vb(13,"td"),o.Ec(14),o.Ub(),o.Vb(15,"td"),o.Vb(16,"button",57),o.cc("click",function(){o.wc(e);const i=t.index;return o.gc(3).remove(i)}),o.Qb(17,"i",58),o.Ub(),o.Ub(),o.Ub()}if(2&e){const e=t.$implicit,i=t.index;o.Db(2),o.Gc(" ",i+1," "),o.Db(2),o.Gc(" ",e.Technical_Name," "),o.Db(2),o.Hc(" ",e.packageSize," ",e.unit," "),o.Db(2),o.Gc(" ",e.packagePrice," "),o.Db(2),o.Gc(" ",e.packageQuantity," "),o.Db(2),o.Gc(" ",e.totalPrice," "),o.Db(2),o.Gc(" ",e.eligibleSubsidy," ")}}function C(e,t){if(1&e&&(o.Vb(0,"div",8),o.Vb(1,"div",9),o.Vb(2,"div",52),o.Vb(3,"table",53),o.Vb(4,"thead",54),o.Vb(5,"tr"),o.Vb(6,"th",55),o.Ec(7,"SL."),o.Ub(),o.Vb(8,"th",55),o.Ec(9,"Technical Name"),o.Ub(),o.Vb(10,"th",55),o.Ec(11,"Package Size"),o.Ub(),o.Vb(12,"th",55),o.Ec(13,"Package Price"),o.Ub(),o.Vb(14,"th",55),o.Ec(15," Package Quantity"),o.Ub(),o.Vb(16,"th",55),o.Ec(17," Total Price "),o.Ub(),o.Vb(18,"th",55),o.Ec(19," Eligible Amount "),o.Ub(),o.Vb(20,"th",55),o.Ec(21," Remove"),o.Ub(),o.Ub(),o.Ub(),o.Vb(22,"tbody"),o.Dc(23,F,18,8,"tr",56),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Ub()),2&e){const e=o.gc(2);o.Db(23),o.mc("ngForOf",e.technicalDetailsList)}}function L(e,t){if(1&e){const e=o.Wb();o.Vb(0,"button",59),o.cc("click",function(t){return o.wc(e),o.gc(2).submitDealerSale(t)}),o.Ec(1," Submit "),o.Ub()}}function w(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div"),o.Vb(1,"div",2),o.Vb(2,"h5"),o.Ec(3,"Sale of Subsidized Input"),o.Ub(),o.Vb(4,"span"),o.Ec(5,"Sale of Subsidized of Input"),o.Ub(),o.Vb(6,"div",3),o.Qb(7,"i",4),o.Qb(8,"i",5),o.Qb(9,"i",6),o.Ub(),o.Ub(),o.Vb(10,"form",7),o.Vb(11,"div",8),o.Vb(12,"div",9),o.Vb(13,"label",10),o.Ec(14,"Farmer Id "),o.Vb(15,"label",11),o.Ec(16,"*"),o.Ub(),o.Ec(17,":"),o.Ub(),o.Vb(18,"div",12),o.Vb(19,"div",13),o.Ec(20),o.Ub(),o.Ub(),o.Ub(),o.Vb(21,"div",9),o.Vb(22,"label",10),o.Ec(23,"Area In (ha) "),o.Vb(24,"label",11),o.Ec(25,"*"),o.Ub(),o.Ec(26,":"),o.Ub(),o.Vb(27,"div",12),o.Vb(28,"div",13),o.Ec(29),o.Ub(),o.Ub(),o.Ub(),o.Vb(30,"div",9),o.Vb(31,"label",10),o.Ec(32,"Item Name "),o.Vb(33,"label",11),o.Ec(34,"*"),o.Ub(),o.Ec(35,":"),o.Ub(),o.Vb(36,"div",14),o.Vb(37,"div",13),o.Vb(38,"span",15),o.Qb(39,"i",16),o.Ub(),o.Vb(40,"select",17),o.cc("change",function(){return o.wc(e),o.gc().getItemPrice()}),o.Vb(41,"option",18),o.Ec(42,"--Select--"),o.Ub(),o.Dc(43,U,2,2,"option",19),o.Ub(),o.Dc(44,D,2,0,"div",20),o.Ub(),o.Ub(),o.Ub(),o.Vb(45,"div",21),o.Vb(46,"div",22),o.Vb(47,"label",23),o.Ec(48,"Technical Name"),o.Vb(49,"label",11),o.Ec(50,"*"),o.Ub(),o.Ec(51,":"),o.Ub(),o.Ub(),o.Vb(52,"div",14),o.Vb(53,"mat-form-field",24),o.Vb(54,"mat-select",25),o.Qb(55,"input",26),o.Dc(56,S,2,3,"mat-option",27),o.hc(57,"filter"),o.Ub(),o.Ub(),o.Dc(58,y,2,0,"div",20),o.Ub(),o.Ub(),o.Vb(59,"div",9),o.Vb(60,"label",10),o.Ec(61,"Max. Eligible Amount(In Rs) "),o.Vb(62,"label",11),o.Ec(63,"*"),o.Ub(),o.Ec(64,":"),o.Ub(),o.Vb(65,"div",14),o.Vb(66,"div",13),o.Vb(67,"span",15),o.Qb(68,"i",16),o.Ub(),o.Qb(69,"input",28),o.Ub(),o.Ub(),o.Ub(),o.Vb(70,"div",9),o.Vb(71,"label",10),o.Ec(72,"Prvs Purchased Amount(In Rs) "),o.Vb(73,"label",11),o.Ec(74,"*"),o.Ub(),o.Ec(75,":"),o.Ub(),o.Vb(76,"div",14),o.Vb(77,"div",13),o.Vb(78,"span",15),o.Qb(79,"i",16),o.Ub(),o.Qb(80,"input",29),o.Ub(),o.Ub(),o.Ub(),o.Vb(81,"div",9),o.Vb(82,"label",10),o.Ec(83,"Packet Size "),o.Vb(84,"label",11),o.Ec(85,"*"),o.Ub(),o.Ec(86,":"),o.Ub(),o.Vb(87,"div",12),o.Vb(88,"div",13),o.Vb(89,"span",15),o.Qb(90,"i",16),o.Ub(),o.Qb(91,"input",30),o.Dc(92,E,2,0,"div",20),o.Ub(),o.Ub(),o.Vb(93,"div",31),o.Vb(94,"mat-radio-group",32),o.Vb(95,"mat-radio-button",33),o.Ec(96,"Kgs"),o.Ub(),o.Vb(97,"mat-radio-button",34),o.Ec(98,"Gms"),o.Ub(),o.Vb(99,"mat-radio-button",35),o.Ec(100,"Litres"),o.Ub(),o.Vb(101,"mat-radio-button",36),o.Ec(102,"ML"),o.Ub(),o.Vb(103,"mat-radio-button",37),o.Ec(104,"Pkt."),o.Ub(),o.Vb(105,"mat-radio-button",38),o.Ec(106,"Nos."),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Vb(107,"div",9),o.Vb(108,"label",10),o.Ec(109,"Packet Price(In Rs) "),o.Vb(110,"label",11),o.Ec(111,"*"),o.Ub(),o.Ec(112,":"),o.Ub(),o.Vb(113,"div",14),o.Vb(114,"div",13),o.Vb(115,"span",15),o.Qb(116,"i",16),o.Ub(),o.Vb(117,"input",39),o.cc("ngModelChange",function(){return o.wc(e),o.gc().geCalculateTotalPrice()}),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Vb(118,"div",9),o.Vb(119,"label",10),o.Ec(120,"No Of Packages "),o.Vb(121,"label",11),o.Ec(122,"*"),o.Ub(),o.Ec(123,":"),o.Ub(),o.Vb(124,"div",14),o.Vb(125,"div",13),o.Vb(126,"span",15),o.Qb(127,"i",16),o.Ub(),o.Vb(128,"input",40),o.cc("ngModelChange",function(){return o.wc(e),o.gc().geCalculateTotalPrice()}),o.Ub(),o.Dc(129,P,2,0,"div",20),o.Ub(),o.Ub(),o.Ub(),o.Vb(130,"div",9),o.Vb(131,"label",10),o.Ec(132,"Total Price(In Rs)"),o.Vb(133,"label",11),o.Ec(134,"*"),o.Ub(),o.Ec(135,":"),o.Ub(),o.Vb(136,"div",14),o.Vb(137,"div",13),o.Vb(138,"span",15),o.Qb(139,"i",16),o.Ub(),o.Qb(140,"input",41),o.Ub(),o.Ub(),o.Ub(),o.Vb(141,"div",9),o.Vb(142,"label",10),o.Ec(143,"Eligible Amount(In Rs)"),o.Vb(144,"label",11),o.Ec(145,"*"),o.Ub(),o.Ec(146,":"),o.Ub(),o.Vb(147,"div",14),o.Vb(148,"div",13),o.Vb(149,"span",15),o.Qb(150,"i",16),o.Ub(),o.Qb(151,"input",42),o.Ub(),o.Ub(),o.Ub(),o.Vb(152,"div",9),o.Vb(153,"label",10),o.Ec(154,"Financial Year"),o.Vb(155,"label",11),o.Ec(156,"*"),o.Ub(),o.Ec(157,":"),o.Ub(),o.Vb(158,"div",14),o.Vb(159,"div",13),o.Ec(160),o.Ub(),o.Ub(),o.Ub(),o.Vb(161,"div",9),o.Vb(162,"label",10),o.Ec(163,"Season "),o.Vb(164,"label",11),o.Ec(165,"*"),o.Ub(),o.Ec(166,":"),o.Ub(),o.Vb(167,"div",14),o.Vb(168,"div",13),o.Ec(169),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Vb(170,"div",8),o.Vb(171,"div",43),o.Dc(172,I,3,1,"button",44),o.Dc(173,k,3,1,"button",44),o.Ub(),o.Ub(),o.Dc(174,C,24,1,"div",45),o.Vb(175,"div",8),o.Dc(176,L,2,0,"button",46),o.Ub(),o.Ub()}if(2&e){const e=o.gc();o.Db(10),o.mc("formGroup",e.DealerSaleForm),o.Db(10),o.Gc(" ",e.permitList.FarmerId," "),o.Db(9),o.Gc(" ",e.permitList.LandArea," "),o.Db(14),o.mc("ngForOf",e.ItemData),o.Db(1),o.mc("ngIf",e.dealerFormValid.item.touched&&!e.dealerFormValid.item.valid),o.Db(12),o.mc("ngForOf",o.jc(57,15,e.filteredList1,e.DealerSaleForm.value.searchText)),o.Db(2),o.mc("ngIf",e.dealerFormValid.technicalDetails.touched&&!e.dealerFormValid.technicalDetails.valid),o.Db(34),o.mc("ngIf",e.dealerFormValid.packageSize.touched&&!e.dealerFormValid.packageSize.valid),o.Db(37),o.mc("ngIf",e.dealerFormValid.packageQuantity.touched&&!e.dealerFormValid.packageQuantity.valid),o.Db(31),o.Gc(" ",e.permitList.Fin_year," "),o.Db(9),o.Gc(" ",e.DealerSaleForm.value.season," "),o.Db(3),o.mc("ngIf",e.addButton),o.Db(1),o.mc("ngIf",0==e.addButton),o.Db(1),o.mc("ngIf",e.showAddtable),o.Db(2),o.mc("ngIf",0==e.addButton)}}function Q(e,t){if(1&e&&o.Qb(0,"app-dealer-sale-receipt",60),2&e){const e=o.gc();o.mc("dealerSaleDetails",e.dealerResult)}}let N=(()=>{class e{constructor(e,t,i){this.dealerService=e,this.fb=t,this.toastr=i,this.dealerSaleReceipt=!1,this.dealerSell=!0,this.permitList={},this.dealerSaleDetails={},this.technicalDetailsList=[],this.TechnicalData=[],this.subCropData=[],this.showAddtable=!1,this.addButton=!0,this.PurchasedSubsidy=0,this.getItems=()=>Object(c.a)(this,void 0,void 0,function*(){try{const e=this.permitList.CompId;this.ItemData=yield this.dealerService.getItems(e).toPromise()}catch(e){this.toastr.error("Sorry. Server problem. Please try again."),console.error(e)}}),this.getPurchasedItemList=()=>new Promise((e,t)=>Object(c.a)(this,void 0,void 0,function*(){try{const t=this.permitList.FarmerId,i=this.permitList.CompId,a=this.DealerSaleForm.value.item.ItemId;this.purchasedList=yield this.dealerService.getPurchasedTechnicalName(t,i,a).toPromise();const r=this.purchasedList.reduce((e,t)=>e+ +t.eligibleSubsidy,0);this.DealerSaleForm.patchValue({prevsPurchasedSubsidy:r}),e()}catch(i){console.error(i),t()}})),this.getTechnicalName=()=>Object(c.a)(this,void 0,void 0,function*(){try{this.subCropData=[];const e=this.DealerSaleForm.value.item.ItemId,t=this.DealerSaleForm.value.item.Technical_Status;this.TechnicalData=yield this.dealerService.getTechnicalName(e,t).toPromise(),this.checkIsOrderPurchased()}catch(e){this.toastr.error("Sorry. Server problem. Please try again."),console.error(e)}}),this.checkIsOrderPurchased=()=>{this.TechnicalData.forEach(e=>{this.purchasedList.some(t=>e.Technical_Code==t.Technical_Code)&&(e.isPurchased=!0)}),this.filteredList1=this.TechnicalData},this.getItemPrice=()=>Object(c.a)(this,void 0,void 0,function*(){try{const e=this.DealerSaleForm.value.item.ItemId,t=this.getPurchasedItemList(),i=yield this.dealerService.getItemPrice(e).toPromise(),a=["comp_55","comp_53","comp_54","comp_57","comp_56","comp_59"],r=a.includes(this.permitList.CompId)&&"352"==this.permitList.Dist_Code?i[0].newIndicativeCost:a.includes(this.permitList.CompId)&&"369"==this.permitList.Dist_Code?i[0].newIndicativeCostPuri:a.includes(this.permitList.CompId)&&"356"==this.permitList.Dist_Code?i[0].newIndicativeCostJajpur:a.includes(this.permitList.CompId)&&"355"==this.permitList.Dist_Code?i[0].newIndicativeCostJagatsinghpur:a.includes(this.permitList.CompId)&&"351"==this.permitList.Dist_Code?i[0].newIndicativeCostDeogarh:a.includes(this.permitList.CompId)&&"372"==this.permitList.Dist_Code?i[0].newIndicativeCostSubarnapur:i[0].IndicativeCost,c=this.technicalDetailsList.reduce((t,i)=>i.ItemId==e?t+ +i.eligibleSubsidy:t,0);yield t,this.DealerSaleForm.controls.prevsPurchasedSubsidy.enable(),this.DealerSaleForm.patchValue({maxSubsidy:+r*+this.permitList.LandArea-+this.DealerSaleForm.value.prevsPurchasedSubsidy-c}),this.DealerSaleForm.controls.prevsPurchasedSubsidy.disable(),this.getTechnicalName()}catch(e){this.toastr.error("Sorry. Server problem. Please try again."),console.error(e)}}),this.geCalculateTotalPrice=()=>Object(c.a)(this,void 0,void 0,function*(){try{this.DealerSaleForm.controls.maxSubsidy.enable();const e=this.DealerSaleForm.value.packagePrice*this.DealerSaleForm.value.packageQuantity;this.DealerSaleForm.patchValue({totalPrice:e}),this.DealerSaleForm.patchValue({eligibleSubsidy:e>=this.DealerSaleForm.value.maxSubsidy?this.DealerSaleForm.value.maxSubsidy:e}),this.DealerSaleForm.controls.maxSubsidy.disable()}catch(e){this.toastr.error("Sorry. Server problem. Please try again."),console.error(e)}}),this.AddTechnicalDetails=()=>{this.DealerSaleForm.controls.maxSubsidy.enable(),this.DealerSaleForm.controls.totalPrice.enable(),this.DealerSaleForm.controls.eligibleSubsidy.enable(),this.addButton=!1,this.showAddtable=!0;const e=this.DealerSaleForm.value;e.Technical_Code=e.technicalDetails.Technical_Code,e.Technical_Name=e.technicalDetails.Technical_Name,e.CompId=e.technicalDetails.CompId,e.ItemId=e.item.ItemId,this.technicalDetailsList.some(t=>e.Technical_Code==t.Technical_Code)?this.toastr.warning("This Input has already been added in below list."):this.technicalDetailsList.push(e),this.DealerSaleForm.reset(),this.DealerSaleForm.controls.season.setValue("Rabi"),this.DealerSaleForm.controls.maxSubsidy.disable(),this.DealerSaleForm.controls.totalPrice.disable(),this.DealerSaleForm.controls.eligibleSubsidy.disable()},this.submitDealerSale=e=>Object(c.a)(this,void 0,void 0,function*(){try{e.target.disabled=!0,this.dealerSaleDetails={permitList:this.permitList,DealerSaleForm:this.technicalDetailsList};const t=yield this.dealerService.submitDealerSale(this.dealerSaleDetails).toPromise();this.dealerResult=t,this.dealerSell=!1,this.dealerSaleReceipt=!0}catch(t){this.toastr.error("Sorry. Server problem. Please try again."),console.error(t)}}),this.DealerSaleForm=this.fb.group({item:["",[n.s.required]],technicalDetails:["",[n.s.required]],searchText:[""],packageSize:["",[n.s.required]],packagePrice:[""],packageQuantity:["",[n.s.required]],totalPrice:[{value:"",disabled:!0}],maxSubsidy:[{value:"",disabled:!0}],prevsPurchasedSubsidy:[{value:"",disabled:!0}],eligibleSubsidy:[{value:"",disabled:!0}],season:["Rabi"],unit:["",[n.s.required]]})}ngOnInit(){this.getItems()}get dealerFormValid(){return this.DealerSaleForm.controls}remove(e){this.technicalDetailsList.splice(e,1)}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(l.a),o.Pb(n.c),o.Pb(s.b))},e.\u0275cmp=o.Jb({type:e,selectors:[["app-dealer-sell"]],inputs:{permitList:"permitList"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"dealerSaleDetails",4,"ngIf"],[1,"card-header"],[1,"card-header-right"],[1,"icofont","icofont-rounded-down"],[1,"icofont","icofont-refresh"],[1,"icofont","icofont-close-circled"],[3,"formGroup"],[1,"card-block"],[1,"row"],[1,"col-sm-5","col-lg-5","col-form-label"],[1,"asterik"],[1,"col-sm-3","col-lg-3"],[1,"input-group"],[1,"col-sm-7","col-lg-7"],[1,"input-group-addon"],[1,"ion-edit"],["formControlName","item",1,"form-control",3,"change"],["value",""],[3,"ngValue",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],[1,"form-group","row"],[1,"col-sm-5","col-lg-5"],["for","subsidy",1,"block"],["appearance","outline"],["formControlName","technicalDetails"],["type","text","formControlName","searchText","placeholder","What are you looking for?",1,"searchTerm",2,"width","100%","height","50px","border-top-style","hidden","border-right-style","hidden","border-left-style","hidden","border-bottom-style","groove","background-color","#eee"],[3,"value","disabled",4,"ngFor","ngForOf"],["type","text","formControlName","maxSubsidy",1,"form-control"],["type","text","formControlName","prevsPurchasedSubsidy",1,"form-control"],["type","text","formControlName","packageSize","placeholder","Enter Package Size",1,"form-control"],[1,"col-sm-4","col-lg-4"],["aria-label","Select an option","formControlName","unit"],["value","Kgs"],["value","Gms"],["value","Litres"],["value","ML"],["value","Pkt"],["value","Nos"],["type","text","formControlName","packagePrice","placeholder","Enter Price",1,"form-control",3,"ngModelChange"],["type","number","formControlName","packageQuantity","placeholder","No Of Packages",1,"form-control",3,"ngModelChange"],["type","text","formControlName","totalPrice","placeholder","Total Price",1,"form-control"],["type","text","formControlName","eligibleSubsidy","placeholder","Eligible Subsidy",1,"form-control"],[2,"padding","20px"],["class","btn btn-primary mat-elevation-z8 float-right",3,"disabled","click",4,"ngIf"],["class","card-block",4,"ngIf"],["type","button","class","btn btn-primary","id","primary-popover-content","data-container","body","data-toggle","popover","title","Primary color states","data-placement","bottom","style","float: right;",3,"click",4,"ngIf"],[3,"ngValue"],[1,"text-danger"],[3,"value","disabled"],[1,"btn","btn-primary","mat-elevation-z8","float-right",3,"disabled","click"],[1,"icofont","icofont-plus"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"table","table-dark","mat-elevation-z8"],[2,"background-color","cadetblue"],["scope","col"],[4,"ngFor","ngForOf"],["type","button",2,"margin-top","-5px","color","red",3,"click"],[1,"fa","fa-trash"],["type","button","id","primary-popover-content","data-container","body","data-toggle","popover","title","Primary color states","data-placement","bottom",1,"btn","btn-primary",2,"float","right",3,"click"],[3,"dealerSaleDetails"]],template:function(e,t){1&e&&(o.Dc(0,w,177,18,"div",0),o.Dc(1,Q,1,1,"app-dealer-sale-receipt",1)),2&e&&(o.mc("ngIf",t.dealerSell),o.Db(1),o.mc("ngIf",t.dealerSaleReceipt))},directives:[a.l,n.t,n.k,n.e,n.r,n.j,n.d,n.n,n.u,a.k,d.b,m.a,n.b,h.b,h.a,n.o,u.f,v],pipes:[f.a],styles:['.mat-radio-button[_ngcontent-%COMP%] ~ .mat-radio-button[_ngcontent-%COMP%]{margin-left:16px}td[_ngcontent-%COMP%]{white-space:pre-wrap}.asterik[_ngcontent-%COMP%]{content:"*";color:red}.mat-form-field[_ngcontent-%COMP%]{width:100%}']}),e})();function T(e,t){1&e&&(o.Vb(0,"div",9),o.Vb(1,"h5"),o.Ec(2,"Permit Verification"),o.Ub(),o.Vb(3,"span"),o.Ec(4,"Permit verifiaction of Farmers"),o.Ub(),o.Vb(5,"div",10),o.Qb(6,"i",11),o.Qb(7,"i",12),o.Qb(8,"i",13),o.Ub(),o.Ub())}function O(e,t){if(1&e){const e=o.Wb();o.Vb(0,"tr"),o.Vb(1,"th",25),o.Ec(2),o.Ub(),o.Vb(3,"td"),o.Ec(4),o.Ub(),o.Vb(5,"td"),o.Ec(6),o.Ub(),o.Vb(7,"td"),o.Ec(8),o.Ub(),o.Vb(9,"td"),o.Ec(10),o.Ub(),o.Vb(11,"td"),o.Vb(12,"button",26),o.cc("click",function(){o.wc(e);const i=t.$implicit;return o.gc(2).goToDealerSellPage(i)}),o.Qb(13,"i",27),o.Ub(),o.Ub(),o.Ub()}if(2&e){const e=t.$implicit,i=t.index;o.Db(2),o.Gc(" ",i+1," "),o.Db(2),o.Gc(" ",e.DemonstrationId," "),o.Db(2),o.Gc(" ",e.FarmerId," "),o.Db(2),o.Gc(" ",e.FarmerName," "),o.Db(2),o.Gc(" ",e.Permit_NO," ")}}const x=function(){return{standalone:!0}};function R(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",4),o.Vb(1,"div",5),o.Vb(2,"label",14),o.Ec(3,"Select Farmer Id "),o.Vb(4,"label",15),o.Ec(5,"*"),o.Ub(),o.Ec(6,":"),o.Ub(),o.Vb(7,"div",16),o.Vb(8,"div",17),o.Vb(9,"div",17),o.Vb(10,"span",18),o.Ec(11),o.Ub(),o.Vb(12,"input",19),o.cc("ngModelChange",function(t){return o.wc(e),o.gc().farmerId=t}),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Vb(13,"div",20),o.Vb(14,"button",21),o.cc("click",function(){return o.wc(e),o.gc().getPermitList()}),o.Ec(15,"Get List"),o.Ub(),o.Ub(),o.Ub(),o.Vb(16,"div",4),o.Vb(17,"div",22),o.Vb(18,"table",23),o.Vb(19,"thead"),o.Vb(20,"tr"),o.Vb(21,"th"),o.Ec(22,"#."),o.Ub(),o.Vb(23,"th"),o.Ec(24,"Demonstration Id"),o.Ub(),o.Vb(25,"th"),o.Ec(26,"Farmer Id"),o.Ub(),o.Vb(27,"th"),o.Ec(28,"Farmer Name"),o.Ub(),o.Vb(29,"th"),o.Ec(30,"Permit No"),o.Ub(),o.Vb(31,"th"),o.Ec(32,"Proceed To Sale "),o.Ub(),o.Ub(),o.Ub(),o.Vb(33,"tbody"),o.Dc(34,O,14,5,"tr",24),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Ub()}if(2&e){const e=o.gc();o.Db(11),o.Gc("",e.prefixOfFarmerID," /"),o.Db(1),o.mc("ngModel",e.farmerId)("ngModelOptions",o.oc(5,x)),o.Db(2),o.mc("disabled",null==e.farmerId),o.Db(20),o.mc("ngForOf",e.permitList)}}function G(e,t){if(1&e&&o.Qb(0,"app-dealer-sell",28),2&e){const e=o.gc();o.mc("permitList",e.sell)}}function _(e,t){if(1&e){const e=o.Wb();o.Vb(0,"button",29),o.cc("click",function(){return o.wc(e),o.gc().gobacktodealerPage()}),o.Qb(1,"i",30),o.Ec(2,"Back"),o.Ub()}}function M(e,t){if(1&e){const e=o.Wb();o.Vb(0,"button",29),o.cc("click",function(){return o.wc(e),o.gc().gobacktodealerSalePage()}),o.Qb(1,"i",30),o.Ec(2,"Back"),o.Ub()}}const B=[{path:"",component:(()=>{class e{constructor(e,t,i){this.layoutService=e,this.dealerService=t,this.toastr=i,this.dealerPage=!0,this.dealerSell=!1,this.dealerSaleReceipt=!1,this.submitButton=!1,this.backButton1=!1,this.backButton2=!1,this.dealerCardheader=!0,this.sell={},this.permit={},this.getBlocks=()=>Object(c.a)(this,void 0,void 0,function*(){try{this.blocks=yield this.dealerService.getBlocks().toPromise()}catch(e){this.toastr.error("Sorry. Server problem. Please try again."),console.error(e)}}),this.getDemonstrationId=()=>Object(c.a)(this,void 0,void 0,function*(){try{this.DemonstrationId=yield this.dealerService.getDemonstrationId().toPromise()}catch(e){this.toastr.error("Sorry. Server problem. Please try again."),console.error(e)}}),this.getPSDDistrictName=()=>Object(c.a)(this,void 0,void 0,function*(){try{const e=yield this.dealerService.getDistrictPrefix().toPromise();this.prefixOfFarmerID=e.Dist_Prefix}catch(e){this.toastr.error("Sorry. Server problem. Please try again."),console.error(e)}}),this.getPermitList=()=>Object(c.a)(this,void 0,void 0,function*(){try{if(""!=this.farmerId){const e=this.prefixOfFarmerID+"/"+this.farmerId;this.permitList=yield this.dealerService.getPermitList(e).toPromise(),0==this.permitList.length&&this.toastr.warning(`The Farmer ID  '${e}'  is not registered to get the benefits.`)}else this.toastr.warning("Please enter the valid Farmer ID.")}catch(e){this.toastr.error("Sorry. Server problem. Please try again."),console.error(e)}}),this.goToDealerSellPage=e=>{try{this.sell=e,this.dealerPage=!1,this.dealerSell=!0,this.submitButton=!0,this.backButton1=!0,this.dealerCardheader=!1}catch(t){this.toastr.error("Sorry. Server problem. Please try again."),console.error(t)}},this.gobacktodealerPage=()=>{this.dealerSell=!1,this.dealerPage=!0,this.backButton1=!1,this.dealerCardheader=!0,this.submitButton=!1},this.goToSaleReceiptPage=()=>{this.dealerPage=!1,this.dealerSell=!1,this.dealerSaleReceipt=!0,this.backButton1=!1,this.backButton2=!0,this.submitButton=!1},this.gobacktodealerSalePage=()=>{this.dealerSaleReceipt=!1,this.dealerSell=!0,this.submitButton=!0,this.dealerPage=!1,this.backButton1=!0,this.backButton2=!1},this.pageTitle="Permit verification",this.pageDesc="Permit verification of Farmers",this.breadcrumbList=["Permit verification of Farmers"]}ngOnInit(){setTimeout(()=>{this.layoutService.setTitle(this.pageTitle),this.layoutService.setPageHeadingDesc(this.pageDesc),this.layoutService.setBreadcrumb(this.breadcrumbList)}),this.getDemonstrationId(),this.getPSDDistrictName()}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(b.a),o.Pb(l.a),o.Pb(s.b))},e.\u0275cmp=o.Jb({type:e,selectors:[["app-permit-verification"]],decls:11,vars:5,consts:[[1,"card"],["class","card-header",4,"ngIf"],["class","card-block",4,"ngIf"],[3,"permitList",4,"ngIf"],[1,"card-block"],[1,"row"],[1,"col-sm-2","col-lg-2"],["type","button","class","btn btn-inverse","data-container","body","data-toggle","popover","title","Inverse color states","data-placement","bottom",3,"click",4,"ngIf"],[1,"col-sm-8","col-lg-8"],[1,"card-header"],[1,"card-header-right"],[1,"icofont","icofont-rounded-down"],[1,"icofont","icofont-refresh"],[1,"icofont","icofont-close-circled"],[1,"col-sm-3","col-lg-3","col-form-label"],[1,"asterik"],[1,"col-sm-6","col-lg-5"],[1,"input-group"],["id","basic-addon1",1,"input-group-addon"],["id","farmerId","name","farmerId","type","number","aria-required","true","placeholder","Enter farmer-ID","required","",1,"required","form-control",3,"ngModel","ngModelOptions","ngModelChange"],[1,"col-sm-3","col-lg-4"],["type","button","id","primary-popover-content","data-container","body","data-toggle","popover","title","Primary color states","data-placement","bottom",1,"btn","btn-primary",3,"disabled","click"],[1,"dt-responsive","table-responsive"],["id","custom-btn",1,"table","table-striped","table-bordered","nowrap"],[4,"ngFor","ngForOf"],["scope","row"],["type","button","id","primary-popover-content","data-container","body","data-toggle","popover","title","Primary color states","data-placement","bottom",1,"btn","btn-primary",3,"click"],[1,"ion-arrow-right-a"],[3,"permitList"],["type","button","data-container","body","data-toggle","popover","title","Inverse color states","data-placement","bottom",1,"btn","btn-inverse",3,"click"],[1,"ion-arrow-left-c"]],template:function(e,t){1&e&&(o.Vb(0,"div",0),o.Dc(1,T,9,0,"div",1),o.Vb(2,"div"),o.Dc(3,R,35,6,"div",2),o.Ub(),o.Dc(4,G,1,1,"app-dealer-sell",3),o.Vb(5,"div",4),o.Vb(6,"div",5),o.Vb(7,"div",6),o.Dc(8,_,3,0,"button",7),o.Dc(9,M,3,0,"button",7),o.Ub(),o.Qb(10,"div",8),o.Ub(),o.Ub(),o.Ub()),2&e&&(o.Db(1),o.mc("ngIf",t.dealerCardheader),o.Db(2),o.mc("ngIf",t.dealerPage),o.Db(1),o.mc("ngIf",t.dealerSell),o.Db(4),o.mc("ngIf",t.backButton1),o.Db(1),o.mc("ngIf",t.backButton2))},directives:[a.l,n.o,n.b,n.q,n.j,n.m,a.k,N],styles:['td[_ngcontent-%COMP%]{max-width:100px;overflow:hidden;text-overflow:ellipsis;white-space:pre-wrap}.asterik[_ngcontent-%COMP%]{content:"*";color:red}']}),e})()}];let A=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.Nb({type:e}),e.\u0275inj=o.Mb({imports:[[r.d.forChild(B)],r.d]}),e})();var q=i("Egam");let z=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.Nb({type:e}),e.\u0275inj=o.Mb({imports:[[a.c,A,n.f,n.p,h.c,p.b,q.b,g.b,m.b,d.d,f.b]]}),e})()}}]);