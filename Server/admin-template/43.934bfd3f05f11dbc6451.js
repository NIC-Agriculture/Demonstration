(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{IqJB:function(e,t,r){"use strict";r.r(t),r.d(t,"PaymentSuccessFailureEntryModule",function(){return y});var i=r("ofXK"),o=r("tyNb"),s=r("mrSG"),a=r("3Pt+"),n=r("fXoL"),l=r("dLb8"),c=r("5eHb"),h=r("4TgG"),b=r("bSwM");function d(e,t){1&e&&(n.Vb(0,"div",44),n.Ec(1," Payment Type is required. "),n.Ub())}function u(e,t){if(1&e&&(n.Vb(0,"option",45),n.Ec(1),n.Ub()),2&e){const e=t.$implicit;n.mc("ngValue",e),n.Db(1),n.Gc(" ",e.referenceno," ")}}function m(e,t){1&e&&(n.Vb(0,"div",44),n.Ec(1," Reference Id is required. "),n.Ub())}function p(e,t){1&e&&(n.Vb(0,"div",44),n.Ec(1," Transaction Id is required. "),n.Ub())}function g(e,t){if(1&e){const e=n.Wb();n.Vb(0,"tr"),n.Vb(1,"th",54),n.Ec(2),n.Ub(),n.Vb(3,"td"),n.Vb(4,"mat-checkbox",55),n.cc("ngModelChange",function(e){return t.$implicit.completed=e})("ngModelChange",function(){return n.wc(e),n.gc(2).updateAllComplete()}),n.Ub(),n.Ub(),n.Vb(5,"td"),n.Ec(6),n.Ub(),n.Vb(7,"td"),n.Ec(8),n.Ub(),n.Vb(9,"td"),n.Ec(10),n.Ub(),n.Vb(11,"td"),n.Ec(12),n.Ub(),n.Vb(13,"td"),n.Ec(14),n.Ub(),n.Vb(15,"td"),n.Vb(16,"button",56),n.cc("click",function(){n.wc(e);const r=t.index;return n.gc(2).setIndex(r)}),n.Ec(17,"Reject"),n.Ub(),n.Ub(),n.Ub()}if(2&e){const e=t.$implicit,r=t.index;n.Db(2),n.Gc(" ",r+1," "),n.Db(2),n.mc("ngModel",e.completed),n.Db(2),n.Gc(" ",e.Permit_NO," "),n.Db(2),n.Gc(" ",e.FarmerId," "),n.Db(2),n.Gc(" ",e.AccountHolderName," "),n.Db(2),n.Gc(" ",e.BankName," "),n.Db(2),n.Gc(" ",e.IFSC," ")}}function $(e,t){if(1&e){const e=n.Wb();n.Vb(0,"button",57),n.cc("click",function(){return n.wc(e),n.gc(2).UpdateTransactionDetails()}),n.Ec(1," Submit "),n.Ub()}}function v(e,t){if(1&e){const e=n.Wb();n.Vb(0,"div"),n.Vb(1,"div",6),n.Vb(2,"div",46),n.Vb(3,"table",47),n.Vb(4,"thead"),n.Vb(5,"tr"),n.Vb(6,"th"),n.Ec(7,"Sl."),n.Ub(),n.Vb(8,"th"),n.Vb(9,"mat-checkbox",48),n.cc("change",function(t){return n.wc(e),n.gc().setAll(t.checked)}),n.Ec(10," Select All "),n.Ub(),n.Ub(),n.Vb(11,"th"),n.Ec(12," Permit No "),n.Ub(),n.Vb(13,"th"),n.Ec(14," Farmer Id "),n.Ub(),n.Vb(15,"th"),n.Ec(16," Account Holder Name "),n.Ub(),n.Vb(17,"th"),n.Ec(18," Bank Name "),n.Ub(),n.Vb(19,"th"),n.Ec(20," IFSC Code "),n.Ub(),n.Vb(21,"th"),n.Ec(22," Status "),n.Ub(),n.Ub(),n.Ub(),n.Vb(23,"tbody"),n.Dc(24,g,18,7,"tr",49),n.Ub(),n.Ub(),n.Ub(),n.Ub(),n.Qb(25,"br"),n.Vb(26,"div",6),n.Vb(27,"div",8),n.Vb(28,"div",50),n.Dc(29,$,2,0,"button",51),n.Ub(),n.Ub(),n.Ub(),n.Vb(30,"div",6),n.Vb(31,"div",8),n.Vb(32,"div",50),n.Vb(33,"button",52),n.Qb(34,"i",53),n.Ec(35,"Export To Excel"),n.Ub(),n.Ub(),n.Ub(),n.Ub(),n.Ub()}if(2&e){const e=n.gc();n.Db(9),n.mc("checked",e.allComplete)("indeterminate",e.someComplete()),n.Db(15),n.mc("ngForOf",e.permitSaleDetails),n.Db(5),n.mc("ngIf",e.submitButton)}}const U=[{path:"",component:(()=>{class e{constructor(e,t,r,i){this.cdaoService=e,this.toastr=t,this.layoutService=r,this.fb=i,this.allComplete=!1,this.transactionDetailsTable=!1,this.submitButton=!1,this.getReferenceIDs=()=>Object(s.a)(this,void 0,void 0,function*(){try{this.permitSaleDetails=[];const e=this.PaymentForm.value.paymentType;this.refNos=yield this.cdaoService.getReferenceIDsForpayment(e).toPromise()}catch(e){this.toastr.error("Sorry. Server problem. Please try again."),console.error(e)}}),this.getPermitSaleDetails=()=>Object(s.a)(this,void 0,void 0,function*(){try{this.transactionDetailsTable=!0;const e=this.PaymentForm.value.referenceId.referenceno,t=this.PaymentForm.value.paymentType;this.permitSaleDetails=yield this.cdaoService.getPermitSaleDetails(e,t).toPromise()}catch(e){this.toastr.error("Sorry. Server problem. Please try again."),console.error(e)}}),this.valueChangeInRefId=()=>{this.permitSaleDetails=[]},this.setIndex=e=>Object(s.a)(this,void 0,void 0,function*(){this.Index=e}),this.RejectSale=()=>Object(s.a)(this,void 0,void 0,function*(){this.permitSaleDetails[this.Index].rejectReason=this.RejectReason,this.permitSaleDetails[this.Index].PymntSt="1",this.RejectReason=""}),this.UpdateTransactionDetails=()=>Object(s.a)(this,void 0,void 0,function*(){try{this.transactionDetailsTable=!1;const e=this.permitSaleDetails.filter(e=>e.completed),t={paymentType:this.PaymentForm.value.paymentType,ReferenceNo:this.PaymentForm.value.referenceId.referenceno,TransId:this.PaymentForm.value.transactionId,SelectedPermitDetails:e},r=yield this.cdaoService.UpdateTransactionDetails(t).toPromise();r.message&&(this.PaymentForm.reset(),this.toastr.success(r.message))}catch(e){this.toastr.error("Sorry. Server problem. Please try again."),console.error(e)}}),this.pageTitle="Payment Success/Failure Entry",this.pageDesc="Payment Success/Failure Entry",this.breadcrumbList=["Success/Failure"],this.PaymentForm=this.fb.group({paymentType:["",a.s.required],referenceId:["",[a.s.required]],transactionId:["",[a.s.required]]})}ngOnInit(){setTimeout(()=>{this.layoutService.setTitle(this.pageTitle),this.layoutService.setPageHeadingDesc(this.pageDesc),this.layoutService.setBreadcrumb(this.breadcrumbList)})}get PaymentFormValid(){return this.PaymentForm.controls}updateAllComplete(){this.allComplete=null!=this.permitSaleDetails&&this.permitSaleDetails.every(e=>e.completed);for(let e=0;e<this.permitSaleDetails.length;e++){if(1==this.permitSaleDetails[e].completed){this.submitButton=!0;break}this.submitButton=!1}}someComplete(){return null!=this.permitSaleDetails&&this.permitSaleDetails.filter(e=>e.completed).length>0&&!this.allComplete}setAll(e){this.allComplete=e,null!=this.permitSaleDetails&&(this.permitSaleDetails.forEach(t=>t.completed=e),this.submitButton=1==this.allComplete)}}return e.\u0275fac=function(t){return new(t||e)(n.Pb(l.a),n.Pb(c.b),n.Pb(h.a),n.Pb(a.c))},e.\u0275cmp=n.Jb({type:e,selectors:[["app-payment-success-failure-entry"]],decls:83,vars:8,consts:[[1,"card"],[1,"card-header"],[1,"card-header-right"],[1,"icofont","icofont-rounded-down"],[1,"icofont","icofont-refresh"],[1,"icofont","icofont-close-circled"],[1,"card-block"],[3,"formGroup"],[1,"row"],[1,"col-sm-12"],[1,"col-lg-12","col","md-6"],[1,"col-sm-3","col-lg-2"],["for","paymentType",1,"block"],[1,"asterik"],[1,"col-sm-2","col-lg-4"],[1,"input-group"],[1,"input-group-addon"],[1,"ion-arrow-down-b"],["formControlName","paymentType","id","paymentType",1,"form-control","form-control-default",3,"change"],["value","","disabled",""],["value","subsidy"],["value","incentive"],["class","text-danger",4,"ngIf"],["for","referenceId",1,"block"],["formControlName","referenceId","id","referenceId",1,"form-control","form-control-default",3,"change"],[3,"ngValue",4,"ngFor","ngForOf"],["for","transactionId",1,"block"],[1,"ion-edit"],["type","text","formControlName","transactionId","placeholder","Enter Transaction Id",1,"form-control","form-control-default"],[1,"col-sm-5","col-lg-4"],["type","button","id","primary-popover-content","data-container","body","data-toggle","popover","title","Primary color states","data-placement","bottom",1,"btn","btn-primary",3,"disabled","click"],[4,"ngIf"],["id","exampleModal","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title",2,"font-weight","bold"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[1,"col-12"],[2,"width","100%","height","100px",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-success",3,"click"],[1,"text-danger"],[3,"ngValue"],[1,"dt-responsive","table-responsive"],["id","custom-btn",1,"table","table-striped","table-bordered","nowrap"],[1,"example-margin",3,"checked","indeterminate","change"],[4,"ngFor","ngForOf"],[1,"col-md-12",2,"text-align","center"],["class","btn btn-primary mat-elevation-z8 ",3,"click",4,"ngIf"],[1,"btn","btn-primary","mat-elevation-z8"],[1,"ion-ios-upload"],["scope","row"],[3,"ngModel","ngModelChange"],["type","button","data-toggle","modal","data-target","#exampleModal",1,"btn","btn-danger",3,"click"],[1,"btn","btn-primary","mat-elevation-z8",3,"click"]],template:function(e,t){1&e&&(n.Vb(0,"div",0),n.Vb(1,"div",1),n.Vb(2,"h4"),n.Ec(3,"Payment Success/Failure Entry"),n.Ub(),n.Vb(4,"span"),n.Ec(5,"Payment Success/Failure Entry"),n.Ub(),n.Vb(6,"div",2),n.Qb(7,"i",3),n.Qb(8,"i",4),n.Qb(9,"i",5),n.Ub(),n.Ub(),n.Vb(10,"div",6),n.Vb(11,"form",7),n.Vb(12,"div",8),n.Vb(13,"div",9),n.Vb(14,"div",8),n.Vb(15,"div",10),n.Vb(16,"div",8),n.Vb(17,"div",11),n.Vb(18,"label",12),n.Ec(19,"Select Payment Type"),n.Vb(20,"label",13),n.Ec(21,"*"),n.Ub(),n.Ec(22,":"),n.Ub(),n.Ub(),n.Vb(23,"div",14),n.Vb(24,"div",15),n.Vb(25,"span",16),n.Qb(26,"i",17),n.Ub(),n.Vb(27,"select",18),n.cc("change",function(){return t.getReferenceIDs()}),n.Vb(28,"option",19),n.Ec(29,"--Select--"),n.Ub(),n.Vb(30,"option",20),n.Ec(31," Subsidy "),n.Ub(),n.Vb(32,"option",21),n.Ec(33," Incentive "),n.Ub(),n.Ub(),n.Dc(34,d,2,0,"div",22),n.Ub(),n.Ub(),n.Ub(),n.Vb(35,"div",8),n.Vb(36,"div",11),n.Vb(37,"label",23),n.Ec(38,"Select Reference Id"),n.Vb(39,"label",13),n.Ec(40,"*"),n.Ub(),n.Ec(41,":"),n.Ub(),n.Ub(),n.Vb(42,"div",14),n.Vb(43,"div",15),n.Vb(44,"span",16),n.Qb(45,"i",17),n.Ub(),n.Vb(46,"select",24),n.cc("change",function(){return t.valueChangeInRefId()}),n.Vb(47,"option",19),n.Ec(48,"--Select--"),n.Ub(),n.Dc(49,u,2,2,"option",25),n.Ub(),n.Dc(50,m,2,0,"div",22),n.Ub(),n.Ub(),n.Ub(),n.Vb(51,"div",8),n.Vb(52,"div",11),n.Vb(53,"label",26),n.Ec(54,"Enter Transaction Id"),n.Vb(55,"label",13),n.Ec(56,"*"),n.Ub(),n.Ec(57,":"),n.Ub(),n.Ub(),n.Vb(58,"div",14),n.Vb(59,"div",15),n.Vb(60,"span",16),n.Qb(61,"i",27),n.Ub(),n.Qb(62,"input",28),n.Dc(63,p,2,0,"div",22),n.Ub(),n.Ub(),n.Vb(64,"div",29),n.Vb(65,"button",30),n.cc("click",function(){return t.getPermitSaleDetails()}),n.Ec(66,"Get List"),n.Ub(),n.Ub(),n.Ub(),n.Ub(),n.Ub(),n.Ub(),n.Ub(),n.Ub(),n.Ub(),n.Dc(67,v,36,4,"div",31),n.Ub(),n.Vb(68,"div",32),n.Vb(69,"div",33),n.Vb(70,"div",34),n.Vb(71,"div",35),n.Vb(72,"h4",36),n.Ec(73," Reason for rejection"),n.Ub(),n.Vb(74,"button",37),n.Vb(75,"span",38),n.Ec(76,"\xd7"),n.Ub(),n.Ub(),n.Ub(),n.Vb(77,"div",39),n.Vb(78,"div",40),n.Vb(79,"textarea",41),n.cc("ngModelChange",function(e){return t.RejectReason=e}),n.Ub(),n.Ub(),n.Ub(),n.Vb(80,"div",42),n.Vb(81,"button",43),n.cc("click",function(){return t.RejectSale()}),n.Ec(82," Submit "),n.Ub(),n.Ub(),n.Ub(),n.Ub(),n.Ub()),2&e&&(n.Db(11),n.mc("formGroup",t.PaymentForm),n.Db(23),n.mc("ngIf",t.PaymentFormValid.paymentType.touched&&!t.PaymentFormValid.paymentType.valid),n.Db(15),n.mc("ngForOf",t.refNos),n.Db(1),n.mc("ngIf",t.PaymentFormValid.referenceId.touched&&!t.PaymentFormValid.referenceId.valid),n.Db(13),n.mc("ngIf",t.PaymentFormValid.transactionId.touched&&!t.PaymentFormValid.transactionId.valid),n.Db(2),n.mc("disabled",!t.PaymentForm.valid),n.Db(2),n.mc("ngIf",t.transactionDetailsTable),n.Db(12),n.mc("ngModel",t.RejectReason))},directives:[a.t,a.k,a.e,a.r,a.j,a.d,a.n,a.u,i.l,i.k,a.b,a.m,b.a],styles:[""]}),e})()}];let f=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.Nb({type:e}),e.\u0275inj=n.Mb({imports:[[o.d.forChild(U)],o.d]}),e})(),y=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.Nb({type:e}),e.\u0275inj=n.Mb({imports:[[i.c,f,b.b,a.f,a.p]]}),e})()},dLb8:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var i=r("AytR"),o=r("fXoL"),s=r("tyNb"),a=r("tk/3");let n=(()=>{class e{constructor(e,t){this.router=e,this.http=t,this.serverUrl=i.a.serverUrl,this.route="cdao",this.withCredential={withCredentials:!0}}getBlocks(){return this.http.get(`${this.serverUrl}/${this.route}/getBlocks`)}getAllScheme(){return this.http.get(`${this.serverUrl}/${this.route}/getAllScheme`)}getSubscheme(e){return this.http.get(`${this.serverUrl}/${this.route}/getSubscheme?schemeId=${e}`)}getComponent(e,t){return this.http.get(`${this.serverUrl}/${this.route}/getComponent?SubschemeId=${e}&Fin_Year=${t}`)}getItems(e){return this.http.get(`${this.serverUrl}/${this.route}/getItems?CompId=${e}`)}getbpItems(e){return this.http.get(`${this.serverUrl}/${this.route}/getbpItems?CompId=${e}`)}getTechnicalName(e,t){return this.http.get(`${this.serverUrl}/${this.route}/getTechnicalName?ItemId=${e}&SubCropId=${t}`)}getCrops(e,t){return this.http.get(`${this.serverUrl}/${this.route}/getCrops?SubschemeId=${e}&CompId=${t}`)}getAllbpSubCrop(e,t){return this.http.get(`${this.serverUrl}/${this.route}/getAllbpSubCrop?CompId=${e}&ItemId=${t}`)}getSubCrop(e,t){return this.http.get(`${this.serverUrl}/${this.route}/getSubCrop?CompId=${e}&CompTypeId=${t}`)}getCropVariety(e){return this.http.get(`${this.serverUrl}/${this.route}/getCropVariety?SubCropId=${e}`)}getBPCropVariety(e){return this.http.get(`${this.serverUrl}/${this.route}/getBPCropVariety?SubCropId=${e}`)}getComponentCost(e){return this.http.get(`${this.serverUrl}/${this.route}/getComponentCost?CompId=${e}`)}getDistrictTarget(e,t){return this.http.get(`${this.serverUrl}/${this.route}/getDistrictTarget?CompId=${e}&Fin_Year=${t}`)}getBlockTargetData(e,t){return this.http.get(`${this.serverUrl}/${this.route}/getBlockTargetData?CompId=${e}&Fin_Year=${t}`)}getCompTargetDetails(e,t,r,i){return this.http.get(`${this.serverUrl}/${this.route}/getCompTargetDetails?schemeId=${e}&SubschemeId=${t}&CompId=${r}&Fin_Year=${i}`)}getItemTechDetails(e,t){return this.http.get(`${this.serverUrl}/${this.route}/getItemTechDetails?CompId=${e}&itemTechRefNo=${t}`)}SubmitBlockTarget(e){return this.http.post(`${this.serverUrl}/${this.route}/SubmitBlockTarget`,e)}UpdateBlockTarget(e){return this.http.post(`${this.serverUrl}/${this.route}/UpdateBlockTarget`,e)}getAllDealerSale(e,t,r,i,o){return this.http.get(`${this.serverUrl}/${this.route}/getAllDealerSale?Block_Code=${e}&schemeId=${t}&SubschemeId=${r}&CompId=${i}&Fin_Year=${o}`)}getAllApprovedDealerSale(e,t,r,i,o){return this.http.get(`${this.serverUrl}/${this.route}/getAllApprovedDealerSale?Block_Code=${e}&schemeId=${t}&SubschemeId=${r}&CompId=${i}&Fin_Year=${o}`)}getAllReturnedDealerSale(e,t,r,i,o){return this.http.get(`${this.serverUrl}/${this.route}/getAllReturnedDealerSale?Block_Code=${e}&schemeId=${t}&SubschemeId=${r}&CompId=${i}&Fin_Year=${o}`)}getAllIncentive(e,t){return this.http.get(`${this.serverUrl}/${this.route}/getIncetiveList?Block_Code=${e}&schemeId=${t}`)}getDealerSaleReciept(e){return this.http.get(`${this.serverUrl}/${this.route}/getDealerSaleReciept?InvoiceNo=${e}`)}getVAWSaleReciept(e){return this.http.get(`${this.serverUrl}/${this.route}/getVAWSaleReciept?Permit_NO=${e}`)}approveDealerSale(e){return this.http.post(`${this.serverUrl}/${this.route}/approveDealerSale`,e)}approveIncentiveList(e){return this.http.post(`${this.serverUrl}/${this.route}/approveIncentiveList`,e)}getBlockWiseSeedReport(e){return this.http.get(`${this.serverUrl}/${this.route}/getBlockWiseSeedReport?Block_Code=${e}`)}getReferenceIDs(e,t){return this.http.get(`${this.serverUrl}/${this.route}/getReferenceIDs?schemeId=${e}&paymentType=${t}`)}generatePaymntFile(e,t,r){return this.http.get(`${this.serverUrl}/${this.route}/generatePaymntFile?ReferenceNo=${e}&schemeId=${t}&paymentType=${r}`)}getFarmerBankDetails(e){return this.http.get(`https://mkuy.apicol.nic.in/api/FarmerData/GetFdetails?fid=${e}`,{headers:{skip:"true"}})}getAvailableTarget(e,t){return this.http.get(`${this.serverUrl}/${this.route}/getAvailableTarget?Fin_Year=${e}&schemeId=${t}`)}getDemonstrationIdCount(){return this.http.get(`${this.serverUrl}/${this.route}/getDemonstrationIdCount`)}getItemNameAndTechnicalName(e,t,r){return this.http.get(`${this.serverUrl}/${this.route}/getItemNameAndTechnicalNameReport?CompId=${e}&Fin_Year=${t}&SubschemeId=${r}`)}getclusterDemonstration(e,t){return this.http.get(`${this.serverUrl}/${this.route}/getclusterDemonstration?Block_Code=${e}&Fin_Year=${t}`)}getDemonstrationStatusReport(e,t){return this.http.get(`${this.serverUrl}/${this.route}/getDemonstrationStatusReport?Block_Code=${e}&Fin_Year=${t}`)}getWardData(e,t){return this.http.get(`${this.serverUrl}/${this.route}/getWardData?WardCode=${e}&DemostrationId=${t}`)}getReferenceIDsForpayment(e){return this.http.get(`${this.serverUrl}/${this.route}/getReferenceIDsForpayment?paymentType=${e}`)}getPermitSaleDetails(e,t){return this.http.get(`${this.serverUrl}/${this.route}/getPermitSaleDetails?ReferenceNo=${e}&paymentType=${t}`)}UpdateTransactionDetails(e){return this.http.post(`${this.serverUrl}/${this.route}/UpdateTransactionDetails`,e)}RegeneratePaymntFile(e,t,r){return this.http.get(`${this.serverUrl}/${this.route}/RegeneratePaymntFile?ReferenceNo=${e}&schemeId=${t}&paymentType=${r}`)}getCropCatagory(){return this.http.get(`${this.serverUrl}/${this.route}/getCropCatagory`)}getCrop(e){return this.http.get(`${this.serverUrl}/${this.route}/getCrop?CropId=${e}`)}AddCropVariety(e){return this.http.post(`${this.serverUrl}/${this.route}/AddCropVariety`,e)}getCalculatedInputCost(){return this.http.get(`${this.serverUrl}/${this.route}/getCalculatedInputCost`)}getCalculatedIncentiveCost(){return this.http.get(`${this.serverUrl}/${this.route}/getCalculatedIncentiveCost`)}returnDealerSaleToBAO(e){return this.http.post(`${this.serverUrl}/${this.route}/returnDealerSaleToBAO`,e)}}return e.\u0275fac=function(t){return new(t||e)(o.Zb(s.a),o.Zb(a.b))},e.\u0275prov=o.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);