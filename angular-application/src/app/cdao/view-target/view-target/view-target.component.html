<div class="card">
  <div class="card-header">
    <h5>View Target</h5>
    <span>View target for block</span>
    <div class="card-header-right">
      <i class="icofont icofont-rounded-down"></i>
      <i class="icofont icofont-refresh"></i>
      <i class="icofont icofont-close-circled"></i>
    </div>
  </div>
    <div class="card-block">
      <div class="card-block">
        <div class="row">
            <div class="col-sm-12">
              <div class="row">
                <div class="col-md-12">
                    <form [formGroup]="ViewTargetForm">
                        <div class="row">
                            <div class="col-lg-6 col md-6">
                                <div class="form-group row">
                                  <div class="col-sm-4 col-lg-3">
                                    <label class="block" for="fuel">Scheme <label class="asterik">*</label>:</label>
                                  </div>
                                  <div class="col-sm-4 col-lg-9">
                                    <select required formControlName="scheme" id="scheme" class="form-control form-control-default"
                                      (change)="getSubscheme()">
                                      <option value="">--Select--</option>
                                      <option [ngValue]="x" *ngFor="let x of AllSchemeData">
                                        {{ x.schemeName }}
                                      </option>
                                    </select>
                                    <div class="text-danger" *ngIf="viewFormValid.scheme.touched && !viewFormValid.scheme.valid">
                                      Scheme is required.
                                    </div>
                                  </div>
                                </div>
            
                                <div class="form-group row">
                                  <div class="col-sm-4 col-lg-3">
                                    <label class="block" for="component">Component <label class="asterik">*</label>:</label>
                                  </div>
                                  <div class="col-sm-4 col-lg-9">
                                    <select required formControlName="component" id="component"
                                      class="form-control form-control-default" (change)="getComponentCost(); " >
                                      <option value="">--Select--</option>
                                      <option [ngValue]="x" *ngFor="let x of ComponentData">
                                        {{ x.CompName }}
                                      </option>
                                    </select>
                                    <div class="text-danger" *ngIf="viewFormValid.component.touched && !viewFormValid.component.valid">
                                    Component is required.
                                  </div>
                                  </div>
                                </div>
            
                                <div class="form-group row">
                                  <div class="col-sm-4 col-lg-3">
                                    <label class="block" for="FinYear">Financial Year <label class="asterik">*</label>:</label>
                                  </div>
                                  <div class="col-sm-4 col-lg-9">
                                    <select  formControlName="FinYear" id="FinYear"
                                      class="form-control form-control-default" required>
                                      <option value="">--Select--</option>
                                      <option [ngValue]="x" *ngFor="let x of FinYears"> {{ x }} </option>
                                    </select>
                                    <div class="text-danger" *ngIf="viewFormValid.FinYear.touched && !viewFormValid.FinYear.valid">
                                    Financial Year is required.
                                  </div>
                                    
                                  </div>
                                </div>
                              </div>
                              <div class="col-lg-6 col md-6">
                                <div class="form-group row">
                                  <div class="col-sm-4 col-lg-3">
                                    <label class="block" for="subscheme">Subscheme <label class="asterik">*</label>:</label>
                                  </div>
                                  <div class="col-sm-4 col-lg-9">
                                    <select required formControlName="subscheme" id="subscheme"
                                      class="form-control form-control-default" (change)="getComponent();">
                                      <option value="">--Select--</option>
                                      <option [ngValue]="x" *ngFor="let x of SubschemeData">
                                        {{ x.SubschemeName }}
                                      </option>
                                    </select>
                                    <div class="text-danger" *ngIf="viewFormValid.subscheme.touched && !viewFormValid.subscheme.valid">
                                    Subscheme is required.
                                  </div>
                                  </div>
                                </div>
                                <div class="form-group row">
                                  <div class="col-sm-4 col-lg-3">
                                    <label class="block" for="subsidy">Total Cost <label class="asterik">*</label>:</label>
                                  </div>
                                  <div class="col-sm-4 col-lg-9">
                                    <input type="text" required class="form-control form-control-default"
                                      formControlName="subsidy" />
                                  </div>
                                </div>
                                <div class="form-group row">
                                  <div class="col-sm-3 col-lg-3">
                                  </div>
                                  <div class="col-sm-3 col-lg-3">
                                      <button  type="button" class="btn btn-primary mat-elevation-z8"
                                      data-toggle="modal"  data-target="#exampleModal" (click)="getItemNameAndTechnicalName()" [disabled]="!ViewTargetForm.valid" >
                                      View Input Details </button>
                                  </div>
                                  <div class="col-sm-3 col-lg-3">
                                  </div>
                                </div>

                                <!-- <div>
                                  <button (click)="loadAllDistrictTarget();" class="btn btn-primary mat-elevation-z8 float-right">Set Target</button>
                                </div> -->
                                <div style="padding: 20px">
                                  <button  type="button" class="btn btn-primary mat-elevation-z8"
                                    style="float: right" (click)="loadDistrictTarget();" [disabled]="!ViewTargetForm.valid">
                                    View Target </button>
                                </div>
            
                              </div>

                        </div>
                    </form>
                </div>
              </div>
            </div>
      </div>
</div>
    </div>
</div>

<div class="card" *ngIf="viewTargetCard">
  <div class="card-header">
    <h5>View Target</h5>
    <!-- <span>Set target for district</span> -->
    <div class="card-header-right">
      <i class="icofont icofont-rounded-down"></i>
      <i class="icofont icofont-refresh"></i>
      <i class="icofont icofont-close-circled"></i>
    </div>
  </div>
  <div class="card-block table-card" id="print-section">
    <div class="table-responsive">
      <table class="table table-striped table-bordered" id="excel-table">
        <thead>
          <tr>
            <th rowspan="2" style="vertical-align : middle;text-align:center;">District</th>
          <th rowspan="2" style="vertical-align : middle;text-align:center;">Target Details</th>
          <th colspan="2" style="vertical-align : middle;text-align:center;">Physical-GEN (ha)</th>
          <th colspan="2" style="vertical-align : middle;text-align:center;">Physical-SCP (ha)</th>
          <th colspan="2" style="vertical-align : middle;text-align:center;">Physical-TASP (ha)</th>
          <th colspan="2" style="vertical-align : middle;text-align:center;">Total-PHY (ha)</th>
            <!-- <th>Action</th> -->
          </tr>
          <tr>
            <!-- <th></th>
            <th></th> -->
            <th>Available Target</th>
            <th>Distributed Target</th>
            <th>Available Target</th>
            <th>Distributed Target</th>
            <th>Available Target</th>
            <th>Distributed Target</th>
            <th>Available Target</th>
            <th>Distributed Target</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th>Total(District) <i class="icofont icofont-arrow-right float-right text-primary"></i></th>
            <th></th>
            <th>{{ totalPhyGen | number : '1.2-2' }}</th>
            <th>{{ totalFinGen | number : '1.2-2' }}</th>
            <th>{{ totalPhySCP | number : '1.2-2' }}</th>
            <th>{{ totalFinSCP | number : '1.2-2' }}</th>
            <th>{{ totalPhyTASP | number : '1.2-2' }}</th>
            <th>{{ totalFinTASP | number : '1.2-2' }}</th>
            <th>{{ totalPhy | number : '1.2-2' }}</th>
            <th>{{ totalFin | number : '1.2-2' }}</th>
          </tr>
          <tr *ngFor="let block of BlockData;">
            <th scope="row">{{ block.Block_Name }}</th>
            <td scope="row">
              <span class="tabledit-span"> Total Target: <br> {{ block.totalTarget }} </span>
            </td>

            <td class="tabledit-view-mode">
              <span class="tabledit-span"> {{ block.PhyGen | number }} </span>
              
            </td>
            <td class="tabledit-view-mode"> {{ block.FinGen | number }} </td>

            <td class="tabledit-view-mode">
              <span class="tabledit-span"> {{ block.PhySCP | number }} </span>
              
            </td>
            <td class="tabledit-view-mode"> {{ block.FinSCP | number }} </td>

            <td class="tabledit-view-mode">
              <span class="tabledit-span"> {{ block.PhyTASP | number }} </span>
              
            </td>
            <td class="tabledit-view-mode"> {{ block.FinTASP | number }} </td>

            <td class="tabledit-view-mode">{{ block.totalPhyByBlock || 0 }} </td>
            <td class="tabledit-view-mode"> {{ block.totalFinByBlock || 0 }}</td>
          </tr>

          <!-- <tr>
            <th>Total(District) <i class="icofont icofont-arrow-right float-right text-primary"></i></th>
            <th> {{ totalTarget }} </th>
            <th>{{ totalPhyGen | number : '1.2-2' }}</th>
            <th>{{ totalFinGen | number : '1.2-2' }}</th>
            <th>{{ totalPhySCP | number : '1.2-2' }}</th>
            <th>{{ totalFinSCP | number : '1.2-2' }}</th>
            <th>{{ totalPhyTASP | number : '1.2-2' }}</th>
            <th>{{ totalFinTASP | number : '1.2-2' }}</th>
            <th>{{ totalPhy | number : '1.2-2' }}</th>
            <th>{{ totalFin | number : '1.2-2' }}</th>
          </tr> -->

        </tbody>

      </table>
    </div>
    
  </div>
  <div class="card-block">
    <button  [useExistingCss]="true"
    styleSheetFile="node_modules/bootstrap/dist/css/bootstrap.min.css"
    class="btn btn-primary mat-elevation-z8 float-right" printSectionId="print-section" ngxPrint ><i class="icofont icofont-print"></i>Print</button>
    <button 
    class="btn btn-primary mat-elevation-z8 float-right" (click)="exportexcel()" style="margin-right:10px;" ><i class="ion-ios-upload"></i> Export to Excel </button>
  </div>
</div>



<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content" style="width: 750px;">
      <div class="modal-header">
        <h4 class="modal-title" id="exampleModalLabel">Input Details</h4>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      
      <div class="modal-body">
        <div class="row">
              <div class="col-md-12">
                  <div class="card b-l-success business-info services m-b-20">
                      <!-- <div class="card-header">
                          <div class="service-header">
                              <a href="#"><h5 class="card-header-text">Farmer Details</h5></a>
                          </div>
                      </div> -->
                      <div class="card-block">
                          <div class="row">
                              <div class="col-sm-12">
                                  <div class="row">
                                      <div class="col-md-12" *ngIf="modalTable">
                                          <table class="table table-striped table-bordered nowrap">
                                              <thead>
                                                  <tr>
                                                      <th>#.</th>
                                                      <th>Item Name</th>
                                                      <th>Technical Name</th>
                                                  </tr>
                                                
                                              </thead>
                                              <tbody>
                                                 <tr *ngFor="let x of ItemTechnicalName; let i = index">
                                                  <th scope="row"> {{i+1}} </th>
                                                     <td> {{ x.ItemName }} </td>
                                                     <td> {{ x.Technical_Name }} </td>
                                                 </tr>
                                              </tbody>
                                          </table>
                                      </div>
                                  </div>
                              </div>
                              <div class="col-sm-12" *ngIf="modalMessage">
                                <p style="color: red; font-weight: bold; text-align: center; font-size: large;">*No target given on this Component. </p>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
      </div>
      <!-- <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div> -->
    </div>
  </div>
</div>
