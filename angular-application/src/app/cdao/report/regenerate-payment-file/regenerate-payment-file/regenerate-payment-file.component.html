<div class="card">
    <div class="card-header">
        <h4>Regenerate Payment File</h4>
        <span>Regenerate of payment file</span>
        <div class="card-header-right">
            <i class="icofont icofont-rounded-down"></i>
            <i class="icofont icofont-refresh"></i>
            <i class="icofont icofont-close-circled"></i>
        </div>
    </div>

    <div class="card-block" >
        <div class="row">
            <div class="col-sm-12">
                <div class="row">
                    <div class="col-lg-6 col md-6">
                        <div class=" row">
                            <div class="col-sm-5 col-lg-4">
                                <label class="block" for="Scheme">Select Payment Type<label class="asterik">*</label>:</label>
                            </div>
                            <div class="col-sm-4 col-lg-8">
                                <div class="input-group">
                                    <span class="input-group-addon"><i class="ion-arrow-down-b"></i></span>
                                    <select [(ngModel)]="paymentType" id="paymentType"
                                        class="form-control form-control-default" (change)="getAllScheme();" >
                                        <option value="">--Select--</option>
                                        <option value="subsidy"> Subsidy </option>
                                        <option value="incentive"> Incentive </option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class=" row">
                            <div class="col-sm-5 col-lg-4">
                                <label class="block" for="Scheme">Select Scheme<label class="asterik">*</label>:</label>
                            </div>
                            <div class="col-sm-4 col-lg-8">
                                <div class="input-group">
                                    <span class="input-group-addon"><i class="ion-arrow-down-b"></i></span>
                                    <select [(ngModel)]="SchemeId" id="Scheme"
                                        class="form-control form-control-default" (change)="getReferenceIDs();">
                                        <option value="" disabled>--Select--</option>
                                        <option [ngValue]="x" *ngFor="let x of AllSchemeData"> {{x.schemeName}} </option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class=" row">
                            <div class="col-sm-5 col-lg-4">
                                <label class="block" for="referenceId">Select Reference Id <label
                                        class="asterik">*</label>:</label>
                            </div>
                            <div class="col-sm-4 col-lg-8">
                                <div class="input-group">
                                    <span class="input-group-addon"><i class="ion-arrow-down-b"></i></span>
                                    <select [(ngModel)]="referenceId" id="referenceId"
                                        class="form-control form-control-default">
                                        <option value="">--Select--</option>
                                        <option [ngValue]="x" *ngFor="let x of refNos"> {{ x.referenceno }} </option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6 col md-6">
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <button type="button" class="btn btn-primary float-right" id="primary-popover-content"
                    data-container="body" data-toggle="popover" title="Primary color states"
                    data-placement="bottom" (click)="RegeneratePaymntFile()" >Regenerate Payment File</button>
            </div>
        </div>
    </div>
    <div>
        <div *ngIf="pfsm">
            <div class="card-block" >
                <div class="dt-responsive table-responsive"  id="excel-table">
                    <table id="custom-btn" class="table table-striped table-bordered nowrap">
                        <thead>
                            <tr>
                               
                                <th>Sl1.</th>
                                <th>Reference No.</th>
                                <th>Full Name In English</th>
                                <th>Gender </th>
                                <th>Address line1</th>
                                <th>Address line2</th>
                                <th>Address line3</th>
                                <th>District</th>
                                <th>State</th>
                                <th>Country </th>
                                <th>Bank Name</th>
                                <th>IFSC Code</th>
                                <th>Account Number</th>
                                <th>Aadhaar Number</th>
                                <th>Scheme Specific ID</th>
                                <th>Subsidy amount (RS)</th>
                                <th>Center Share Payment Account</th>
                                <th>State Share Payment Account</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let x of regeneratepaymentFile; let i = index" >
                                <th scope="row"> {{ i+1 }} </th>
                                <td> {{ x.ReferenceNo }} </td>
                                <td> {{ x.AccountHolderName }} </td>
                                <td> {{ x.Gender }} </td>
                                <td> {{ x.Block_Name }} </td>
                                <td> {{ x.GpName }} </td>
                                <td> {{ x.VillageName }} </td>
                                <td> {{ x.Dist_Name }} </td>
                                <td> Odisha </td>
                                <td> India  </td>
                                <td> {{ x.BankName }} </td>
                                <td> {{ x.IFSC }} </td>
                                <td> '{{ x.AccountNo }} </td>
                                <td> {{ x.aadhaarNo }} </td>
                                <td> {{ x.FarmerId }} </td>
                                <td> {{ x.totaleligiblesubsidy }} </td>
                                <td> {{ x.centerShare }} </td>
                                <td> {{ x.stateShare }} </td>
                              
                            </tr>
                        </tbody>
                    </table>
                </div>
                
            </div><br>
            <div class="card-block">
        
                <div class="row">
                    <div class="col-md-12" style="text-align: center;">
                        <button class="btn btn-primary mat-elevation-z8 " (click)="exportexcel()"><i class="ion-ios-upload"></i>Export To
                            Excel</button>
                    </div>
                </div>
            </div>
        </div>



        <div *ngIf="stateplan">
            <div class="card-block" >
                <div class="dt-responsive table-responsive"  id="excel-table">
                    <table id="custom-btn" class="table table-striped table-bordered nowrap">
                        <thead>
                            <tr>
                               
                                <th>Sl.</th>
                                <th>Invoice No.</th>
                                <th>Reference No.</th>
                                <th>Scheme</th>
                                <th>Sub Scheme</th>
                                <th>Account Holder Name </th>
                                <th>Gender </th>
                                <th>Block Name</th>
                                <th>Gp Name</th>
                                <th>Village Name</th>
                                <th>Catagory</th>
                                <th>Account No.</th>
                                <th>IFSC Code</th>
                                <th>Bank Name</th>
                                <th>Eligible Amount (Rs)(State Share)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let x of regeneratepaymentFile; let i = index" >
                                <th scope="row"> {{ i+1 }} </th>
                                <td> {{ x.InvoiceNo }} </td>
                                <td> {{ x.ReferenceNo }} </td>
                                <td> {{ x.schemeName }} </td>
                                <td> {{ x.SubschemeName }} </td>
                                <td> {{ x.AccountHolderName }} </td>
                                <td> {{ x.Gender }} </td>
                                <td> {{ x.Block_Name }} </td>
                                <td> {{ x.GpName }} </td>
                                <td> {{ x.VillageName }} </td>
                                <td> {{ x.Farmer_Category }} </td>
                                <td> '{{ x.AccountNo }} </td>
                                <td> {{ x.IFSC }} </td>
                                <td> {{ x.BankName }} </td>
                                <td> {{ x.totaleligiblesubsidy | number : '1.2-2'}} </td>
                              
                            </tr>
                        </tbody>
                    </table>
                </div>
                
            </div><br>
            <div class="card-block">
        
                <div class="row">
                    <div class="col-md-12" style="text-align: center;">
                        <button class="btn btn-primary mat-elevation-z8 " (click)="exportexcel()"><i class="ion-ios-upload"></i>Export To
                            Excel</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
